<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_purchaseorder_document_charge" inherit_id="purchase.report_purchaseorder_document">

        <xpath expr="//p[@t-field='o.date_approve']" position="replace">
            <p t-esc="o.date_approve.strftime('%Y-%m-%d')" class="m-0"/>
        </xpath>
        <xpath expr="//p[@t-field='o.date_order']" position="replace">
             <p t-esc="o.date_order.strftime('%Y-%m-%d')" class="m-0"/>
        </xpath>
        <xpath expr="//span[@t-field='line.date_planned']" position="replace">
                <span t-esc="line.date_planned.strftime('%Y-%m-%d')"/>
        </xpath>
        <xpath expr="//div[@class='page']" position="before">
            <br/>
                <strong>Invoice address:</strong>
                <div t-if="o.invoice_ids and o.invoice_ids[0].partner_id">
                    <span t-field="o.invoice_ids[0].partner_id.name"/>
                    <div t-field="o.invoice_ids[0].partner_id"
                         t-options='{"widget": "contact", "fields": ["address", "phone"], "no_marker": True, "phone_icons": True}'/>
                </div>
        </xpath>
        <xpath expr="//th[@name='th_description']" position="before">
            <th name="th_product_code">
                <strong>Product Code</strong>
            </th>

        </xpath>
        <xpath expr="//td[@id='product']" position="before">
            <td id="product_code">
                <span t-field="line.product_id.default_code"/>
                <t t-if="line.product_id.variant_seller_ids.filtered(lambda l: l.partner_id== line.order_id.partner_id).product_code">
                /
                <span t-esc="line.product_id.variant_seller_ids.filtered(lambda l: l.partner_id== line.order_id.partner_id).product_code"/>
                </t>
            </td>

        </xpath>
        <xpath expr="//p[@t-field='o.notes']" position="after">
            <p style="page-break-after: always;"></p>
            <t t-raw="o.company_id.purchase_general_terms_condition"/>
        </xpath>
    </template>
</odoo>
